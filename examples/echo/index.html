<!doctype html><html>
    <head>
        <meta charset="utf-8" />
        <title>Echo</title>
        <script type="text/javascript" src="jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $('#form').submit(function() {
                    var message = $('#input').val();
                    $('#input').val('');
                    if (message && message != '') {
                        $('#log').append("> " + message + "\n");
                        ws.send(message);
                    }
                    return false;
                });

                var ws = new WebSocket("ws://localhost:3000");

                ws.onerror = function(e) {
                    $('#container').html('Error: ' + e);
                };

                ws.onopen = function() {
                    $('#log').append("Connected!\n");
                };

                ws.onmessage = function(e) {
                    var message = e.data;
                    $('#log').append("< " + message + "\n");
                };

                ws.onclose = function() {
                    $('#container').html('Disconnected :(');
                };
            });
        </script>
    </head>
    <body>
        <div id="container">
            <pre id="log">
            </pre>
            <form id="form">
                <input id="input" /><br />
                <input type="submit" value="Send" />
            </form>
        </div>
    </body>
</html>
